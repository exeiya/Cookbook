{"version":3,"sources":["components/IngredientInputTable.js","components/RecipeForm.js","services/recipes.js","reducers/notificationReducer.js","reducers/recipeReducer.js","components/CreateRecipe.js","components/ModifyRecipe.js","components/RecipeList.js","reducers/loginModalReducer.js","components/RecipeComments.js","services/users.js","reducers/userReducer.js","components/Recipe.js","components/Notification.js","components/RecipeCard.js","components/Dashboard.js","services/login.js","reducers/loginReducer.js","components/MenuBar.js","components/LoginForm.js","components/Users.js","components/SignupForm.js","components/User.js","App.js","index.js","assets/default_picture.jpg"],"names":["IngredientInputTable","_ref","ingredients","setIngredients","errors","setErrors","handleIngredientChange","field","_ref2","target","map","ingredient","id","name","Object","objectSpread","defineProperty","value","ingredientIds","filter","val","addedIngredients","error","includes","react_default","a","createElement","key","Form","Field","onChange","placeholder","amount","length","Button","basic","color","type","onClick","style","fontWeight","Group","grouped","paddingBottom","Icon","event","preventDefault","concat","shortid","generate","marginBottom","connect","withRouter","props","_useState","useState","values","cookingTime","split","cookingTimeUnit","title","instructions","_useState2","slicedToArray","setValues","_useState3","i","_useState4","_useState5","_useState6","imgFile","setImgFile","_useState7","_useState8","cookingTimeOptions","text","validateFields","fieldErrors","category","file","size","image","forEach","errorExists","push","isValid","entries","handleSubmit","_ref3","asyncToGenerator","regenerator_default","mark","_callee","recipe","recipeData","submitted","wrap","_context","prev","next","FormData","append","JSON","stringify","onSubmit","sent","history","stop","_x","apply","this","arguments","handleChange","showError","padding","removeImage","img","Grid","Row","columns","centered","Column","width","noValidate","stackable","_ref5","required","components_IngredientInputTable","imgSrc","url","preview","htmlFor","maxWidth","cursor","Image","bordered","rounded","src","maxHeight","Segment","opacity","position","zIndex","accept","_ref4","files","URL","createObjectURL","handleImageChange","content","icon","marginTop","marginLeft","imageField","servings","Input","_ref6","label","labelPosition","min","_ref7","action","Select","compact","options","defaultValue","e","_ref8","fluid","_ref9","textAlign","submitButton","baseUrl","token","services_recipes","getAll","response","axios","get","abrupt","data","create","_callee2","config","_context2","headers","Authorization","post","likeRecipe","_callee3","res","_context3","patch","likes","_x2","setToken","newToken","addComment","_callee4","comment","_context4","_x3","_x4","removeRecipe","_callee5","recipeId","_context5","delete","_x5","update","_callee6","_context6","put","_x6","_x7","notify","msg","notifType","dispatch","setNotification","setTimeout","notificationReducer","state","undefined","recipeReducer","toConsumableArray","likedRecipe","r","comments","removedRecipe","updatedRecipe","addRecipe","newRecipe","recipeService","t0","console","log","components_RecipeForm","positive","loggedUser","updateRecipe","user","goBack","react_router","to","recipes","setFilter","sortBy","setSortBy","recipesToShow","toLowerCase","recipeCardStyle","margin","recipeList","sort","b","aTitle","bTitle","sortRecipes","Card","as","Link","minHeight","Label","backgroundColor","picture","Content","Header","loggedUserOptions","stretched","pathname","tab","Dropdown","inline","header","doubling","openLoginModal","loginModalReducer","setComment","Fragment","Comment","minWidth","dividing","idx","bgcolor","_id","Author","username","Metadata","Date","date","toLocaleString","Text","commentBox","window","scrollTo","services_users","updateFavoriteRecipes","favorite","userReducer","u","isFavorited","users","find","userfavorites","favoriteRecipes","ownProps","favoriteRecipe","updatedUser","userService","showRemoveModal","setShowRemoveModal","handleClick","handleRemove","padded","Modal","open","onClose","Actions","react_router_dom","paddingTop","verticalAlign","pointing","paddingRight","Table","unstackable","HeaderCell","colSpan","Body","Cell","whiteSpace","components_RecipeComments","notification","Message","RecipeCard","overflow","randomArray","random","Math","floor","components_RecipeCard","getRandomRecipes","newestRecipes","Array","getNewestRecipes","services_login","login","credentials","loginReducer","logout","localStorage","clear","loginDropdownTrigger","loggedUserStyle","borderRadius","Menu","Item","item","trigger","loginModal","closeLoginModal","loginService","setItem","setUsername","password","setPassword","setError","errorMsg","negative","iconPosition","Divider","UserCard","searchFilter","setSearchFilter","searchResult","setSearchResult","matchingUsers","searchUsers","fontSize","Users_UserCard","slice","sortedByRecipes","mostRecipes","createUser","newUser","passwordConfirm","showAccordion","setShowAccordion","RegExp","test","usernameDuplicate","float","Accordion","Title","active","List","selectedTab","loggedUserProfile","recipeGrid","paneStyle","recipePane","Tab","Pane","favoritesPane","panesToShow","menuItem","render","panes","defaultActiveIndex","Number","initializeRecipes","initializeUsers","setInitialLoggedUser","useEffect","storedLoggedUser","getItem","parse","recipeById","Container","components_MenuBar","components_LoginForm","components_Notification","exact","path","components_Dashboard","components_RecipeList","components_CreateRecipe","match","components_Recipe","params","components_ModifyRecipe","components_Users","location","components_User","components_SignupForm","reducer","combineReducers","store","createStore","applyMiddleware","thunk","ReactDOM","es","src_App","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.e3f29441.chunk.js","sourcesContent":["import React from 'react';\nimport shortid from 'shortid';\nimport { Form, Button, Icon } from 'semantic-ui-react';\n\nconst IngredientInputTable = ({ ingredients, setIngredients, errors, setErrors }) => {\n  const addIngredient = (event) => {\n    event.preventDefault();\n    setIngredients(ingredients.concat({\n      id: shortid.generate(),\n      name: '',\n      amount: ''\n    })\n    );\n  };\n\n  const handleIngredientChange = (field) => ({ target }) => {\n    setIngredients(\n      ingredients.map((ingredient) => ingredient.id === target.name\n        ? { ...ingredient, [field]: target.value }\n        : ingredient\n      )\n    );\n    setErrors({ ...errors,\n      ingredientIds: errors.ingredientIds.filter(val => val !== target.name),\n      ingredients: null });\n  };\n\n  const removeIngredient = (id) => () => {\n    setIngredients(ingredients.filter(ingredient => ingredient.id !== id));\n    setErrors({ ...errors,\n      ingredientIds: errors.ingredientIds.filter(val => val !== id),\n      ingredients: null });\n  };\n\n  const addedIngredients = ingredients.map((ingredient) => {\n    const error = errors.ingredientIds.includes(ingredient.id) && true;\n    return (\n      <tr key={ingredient.id}>\n        <td>\n          <Form.Field error={error}>\n            <input\n              value={ingredient.name}\n              name={ingredient.id}\n              onChange={handleIngredientChange('name')}\n              placeholder=\"Ainesosan nimi\"\n            />\n          </Form.Field>\n        </td>\n        <td>\n          <Form.Field error={error}>\n            <input\n              value={ingredient.amount}\n              name={ingredient.id}\n              onChange={handleIngredientChange('amount')}\n              placeholder=\"Ainesosan määrä\"\n            />\n          </Form.Field>\n        </td>\n        <td>\n          {ingredients.length > 1\n            ? <Button basic color=\"orange\" type=\"button\" onClick={removeIngredient(ingredient.id)}>\n              <span style={{ fontWeight: 'bold' }}>Poista</span></Button>\n            : null}\n        </td>\n      </tr>\n    );\n  });\n\n  return (\n    <Form.Group grouped>\n      <table>\n        <tbody>\n          {addedIngredients.length > 0 ? <tr><th>Ainesosa</th><th>Määrä</th></tr> : null}\n          {addedIngredients}\n        </tbody>\n      </table>\n      {errors.ingredients && <div style={{ paddingBottom: '10px' }}>\n        <Icon color=\"yellow\" name=\"exclamation triangle\" /> {errors.ingredients}</div>}\n      <Button type=\"button\" onClick={addIngredient} color=\"teal\" style={{ marginBottom: '10px' }}>Lisää uusi ainesosa</Button>\n    </Form.Group>\n  );\n};\n\nexport default IngredientInputTable;","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport shortid from 'shortid';\nimport { withRouter } from 'react-router-dom';\nimport { Form, Icon, Select, Input, Grid, Image, Segment, Button } from 'semantic-ui-react';\nimport IngredientInputTable from './IngredientInputTable';\n\nconst RecipeForm = (props) => {\n  const [values, setValues] = useState(props.values\n    ? { ...props.values,\n      cookingTime: props.values.cookingTime ? props.values.cookingTime.split(' ')[0] : null,\n      cookingTimeUnit: props.values.cookingTime ? props.values.cookingTime.split(' ')[1] : null }\n    : { title: '', instructions: '' });\n  const [ingredients, setIngredients] = useState(\n    props.values ? props.values.ingredients.map(i => ({ ...i, id: shortid.generate() })) :\n      [{\n        id: shortid.generate(),\n        name: '',\n        amount: ''\n      }]\n  );\n  const [ imgFile, setImgFile ] = useState();\n  const [errors, setErrors] = useState({ ingredientIds: [] });\n\n  const categoryOptions = [\n    { key: 'dinner', value: 'pääruoka', text: 'Pääruoka' },\n    { key: 'dessert', value: 'jälkiruoka', text: 'Jälkiruoka' },\n    { key: 'salad', value: 'salaatti', text: 'Salaatti' }\n  ];\n\n  const cookingTimeOptions = [\n    { key: 'minute', value: 'minuuttia', text: 'minuuttia' },\n    { key: 'hour', value: 'tuntia', text: 'tuntia' }\n  ];\n\n  const validateFields = () => {\n    let fieldErrors = { ...errors };\n    if (values.title.length < 3) {\n      fieldErrors.title = 'Reseptin nimen tulee olla vähintään 3 merkin pituinen';\n    }\n\n    if (values.instructions.length === 0) {\n      fieldErrors.instructions = 'Reseptillä täytyy olla ohje';\n    }\n\n    if (!values.category) {\n      fieldErrors.category = 'Valitse reseptille kategoria';\n    }\n\n    if (imgFile && (imgFile.file.size > 1000000)) {\n      fieldErrors.image = 'Kuvan koko voi olla enintään 1 MB';\n    } else if (imgFile && !['image/jpg', 'image/png', 'image/gif', 'image/jpeg'].includes(imgFile.file.type)) {\n      fieldErrors.image = 'Vain tietyt kuvatiedostot ovat tuettuja (jpg, jpeg, png, gif)';\n    }\n\n    ingredients.forEach(ingredient => {\n      const errorExists = fieldErrors.ingredientIds.includes(ingredient.id);\n      if (ingredient.name.length === 0) {\n        if (!errorExists) fieldErrors.ingredientIds.push(ingredient.id);\n        fieldErrors.ingredients = 'Ainesosilla täytyy olla nimi';\n      } else if (ingredient.name.length > 0 && errorExists) {\n        fieldErrors.ingredientIds = fieldErrors.ingredientIds.filter(value => value !== ingredient.id);\n      }\n    });\n\n    setErrors(fieldErrors);\n    let isValid = true;\n    Object.entries(fieldErrors).forEach(([key, value]) => {\n      if(key === 'ingredientIds') {\n        if (value.length > 0) isValid = false;\n        return;\n      } else if (value) {\n        isValid = false;\n      }\n    });\n\n    return isValid;\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const recipe = {\n      ...values,\n      ingredients: ingredients\n        .map(ingredient => {\n          return ({ name: ingredient.name, amount: ingredient.amount });\n        }),\n    };\n\n    if(values.cookingTime) {\n      recipe.cookingTime = `${values.cookingTime} ${values.cookingTimeUnit || cookingTimeOptions[0].value}`;\n    }\n\n    if (validateFields()) {\n      let recipeData;\n      if (imgFile) {\n        recipeData = new FormData();\n        recipeData.append('image', imgFile.file);\n        recipeData.append('recipe', JSON.stringify(recipe));\n      } else {\n        recipeData = recipe;\n      }\n      let submitted;\n\n      // If the recipe already exists, we must include the id to update it\n      if (props.values) {\n        submitted = await props.onSubmit(recipeData, props.values.id);\n      } else {\n        submitted = await props.onSubmit(recipeData);\n      }\n\n      if (submitted) {\n        props.history.push('/');\n      }\n    }\n  };\n\n  const handleChange = (target) => {\n    setValues({ ...values, [target.name]: target.value });\n    setErrors({ ...errors, [target.name]: null });\n  };\n\n  const handleImageChange = (target) => {\n    const file = target.files[0];\n    setErrors({ ...errors, image: null });\n    if(!file) return setImgFile(null);\n    setImgFile({\n      file,\n      name: file.name,\n      preview: URL.createObjectURL(file)\n    });\n  };\n\n  const showError = (field) => {\n    if (errors[field]) {\n      return (\n        <div style={{ padding: '5px' }}>\n          <Icon color=\"yellow\" name=\"exclamation triangle\" />\n          {errors[field]}\n        </div>\n      );\n    }\n    return null;\n  };\n\n  const removeImage = () => {\n    setImgFile(null);\n    if (values.img) setValues({ ...values, img: null });\n  };\n\n  const imageField = () => {\n    let imgSrc = null;\n    if (!imgFile && values.img) {\n      imgSrc = values.img.url;\n    } else if (imgFile) {\n      imgSrc = imgFile.preview;\n    }\n\n    return (\n      <Form.Field error={errors.image && true}>\n        <label>Kuva {errors.image && showError('image')}</label>\n        <label htmlFor=\"image\" style={{ maxWidth: '200px', cursor: 'pointer' }}>\n          {imgSrc\n            ? <Image bordered rounded src={imgSrc} size=\"medium\" style={{ maxWidth: '200px', maxHeight: '200px' }}/>\n            : <Segment><Icon name=\"upload\" /> Lataa kuva</Segment>}\n        </label>\n        <input\n          style={{ opacity: 0, position: 'absolute', zIndex: -1 }}\n          id=\"image\"\n          type=\"file\"\n          name=\"image\"\n          accept=\"image/*\"\n          onChange={({ target }) => handleImageChange(target) } />\n        { !imgSrc ? null : <Button color=\"red\" content=\"Poista kuva\" icon=\"trash alternate\" type=\"button\"\n          style={{ marginTop: '5px', marginLeft: '10%' }} onClick={removeImage}/>}\n      </Form.Field>\n    );\n  };\n\n  return (\n    <Grid.Row columns={1} centered>\n      <Grid.Column width={12}>\n        <Form onSubmit={handleSubmit} noValidate>\n          <Grid stackable>\n            <Grid.Row columns={2}>\n              <Grid.Column width={10}>\n                <Form.Field  width={8} error={errors.title && true}>\n                  <label>Reseptin nimi</label>\n                  {errors.title && showError('title')}\n                  <input\n                    onChange={({ target }) => handleChange(target)}\n                    name=\"title\"\n                    value={values.title}\n                    placeholder=\"Reseptin nimi\"\n                    required />\n                </Form.Field>\n                <IngredientInputTable ingredients={ingredients} setIngredients={setIngredients} errors={errors} setErrors={setErrors} />\n              </Grid.Column>\n\n              <Grid.Column width={6}>\n                {imageField()}\n              </Grid.Column>\n            </Grid.Row>\n          </Grid>\n\n          <Form.Group>\n            <Form.Field width={4} error={errors.servings && true}>\n              <label>Annosmäärä</label>\n              <Input\n                onChange={({ target }) => handleChange(target)}\n                name=\"servings\"\n                label={{ basic: true, content: 'annosta' }}\n                labelPosition=\"right\"\n                type=\"number\"\n                min=\"0\"\n                value={values.servings || ''}\n              />\n            </Form.Field>\n            <Form.Field width={4} error={errors.cookingTime && true}>\n              <label>Valmistusaika</label>\n              <Input\n                onChange={({ target }) => handleChange(target)}\n                name=\"cookingTime\"\n                type=\"number\"\n                min=\"0\"\n                value={values.cookingTime || ''}\n                action>\n                <input />\n                <Select\n                  compact\n                  options={cookingTimeOptions}\n                  defaultValue={cookingTimeOptions[0].value}\n                  name=\"cookingTimeUnit\"\n                  onChange={(e, target) => handleChange(target)}\n                />\n              </Input>\n            </Form.Field>\n            <Form.Select\n              onChange={(e, { value }) => setValues({ ...values, category: value })}\n              onClick={() => setErrors({ ...errors, category: null })}\n              error={errors.category && true}\n              width={4}\n              name=\"category\"\n              fluid\n              label=\"Reseptin tyyppi\"\n              placeholder=\"Reseptin tyyppi\"\n              defaultValue={values.category}\n              options={categoryOptions}\n            />\n          </Form.Group>\n          {errors.servings && showError('servings')}\n          {errors.cookingTime && showError('cookingTime')}\n          {errors.category && showError('category')}\n\n          <Form.Field error={errors.instructions && true} >\n            <label>Ohjeet</label>\n            {errors.instructions && showError('instructions')}\n            <textarea\n              onChange={({ target }) => handleChange(target)}\n              name=\"instructions\" value={values.instructions}\n              placeholder=\"Kirjoita reseptin ohje tähän\"\n              required\n            />\n          </Form.Field>\n          <div style={{ textAlign: 'center' }}>\n            {props.submitButton}\n          </div>\n        </Form>\n      </Grid.Column>\n    </Grid.Row>\n  );\n};\n\nexport default connect()(withRouter(RecipeForm));","import axios from 'axios';\n\nconst baseUrl = '/api/recipes';\n\nlet token = null;\n\nconst setToken = newToken => {\n  token = `Bearer ${newToken}`;\n};\n\nconst getAll = async () => {\n  const response = await axios.get(baseUrl);\n  return response.data;\n};\n\nconst create = async (recipe) => {\n  const config = { headers: { Authorization: token } };\n  const response = await axios.post(baseUrl, recipe, config);\n  return response.data;\n};\n\nconst likeRecipe = async (recipe) => {\n  const config = { headers: { Authorization: token } };\n  const res = await axios.patch(`${baseUrl}/${recipe.id}`,\n    { likes: (recipe.likes || 0) + 1 }, config);\n  return res.data;\n};\n\nconst addComment = async (recipe, comment) => {\n  const config = { headers: { Authorization: token } };\n  const res = await axios.post(`${baseUrl}/${recipe.id}/comments`,\n    { comment }, config);\n  return res.data;\n};\n\nconst removeRecipe = async (recipeId) => {\n  const config = { headers: { Authorization: token } };\n  const res = await axios.delete(`${baseUrl}/${recipeId}`, config);\n  return res.data;\n};\n\nconst update = async (recipe, recipeId) => {\n  const config = { headers: { Authorization: token } };\n  const res = await axios.put(`${baseUrl}/${recipeId}`, recipe, config);\n  return res.data;\n};\n\nexport default {\n  getAll,\n  create,\n  likeRecipe,\n  setToken,\n  addComment,\n  removeRecipe,\n  update\n};","const notificationReducer = (state = null, action) => {\n  switch (action.type) {\n    case 'SET_NOTIFICATION':\n      return {\n        msg: action.msg,\n        notifType: action.notifType\n      };\n    case 'REMOVE_NOTIFICATION':\n      return null;\n    default:\n      return state;\n  }\n};\n\nexport const setNotification = (msg, notifType)  => {\n  return {\n    type: 'SET_NOTIFICATION',\n    msg,\n    notifType\n  };\n};\n\nexport const removeNotification = () => {\n  return {\n    type: 'REMOVE_NOTIFICATION'\n  };\n};\n\nexport const notify = (msg, notifType) => dispatch => {\n  dispatch(setNotification(msg, notifType));\n  setTimeout(() => dispatch(removeNotification()), 5000);\n};\n\nexport default notificationReducer;","import recipeService from '../services/recipes';\nimport { notify } from '../reducers/notificationReducer';\n\nconst recipeReducer = (state = [], action) => {\n  switch (action.type) {\n    case 'INIT_RECIPES':\n      return action.data;\n    case 'ADD_RECIPE':\n      return [...state, action.data ];\n    case 'LIKE_RECIPE': {\n      const likedRecipe = action.data;\n      return state.map(r => r.id === likedRecipe.id ? likedRecipe : r);\n    }\n    case 'ADD_COMMENT': {\n      const recipe = action.data;\n      return state.map(r => r.id === recipe.id\n        ? { ...recipe, comments: recipe.comments }\n        : r);\n    }\n    case 'REMOVE_RECIPE': {\n      const removedRecipe = action.data;\n      return state.filter(r => r.id !== removedRecipe.id);\n    }\n    case 'UPDATE_RECIPE': {\n      const updatedRecipe = action.data;\n      return state.map(r => r.id === updatedRecipe.id\n        ? updatedRecipe : r);\n    }\n    default:\n      return state;\n  }\n};\n\nexport const initializeRecipes = () => {\n  return async dispatch => {\n    const recipes = await recipeService.getAll();\n    dispatch({\n      type: 'INIT_RECIPES',\n      data: recipes\n    });\n  };\n};\n\nexport const addRecipe = (recipe) => {\n  return async dispatch => {\n    try {\n      const newRecipe = await recipeService.create(recipe);\n      dispatch({\n        type: 'ADD_RECIPE',\n        data: newRecipe\n      });\n      dispatch(notify(`Uusi resepti '${newRecipe.title}' lisätty!`, 'success'));\n      return true;\n    } catch (error) {\n      console.log(error);\n      dispatch(notify('Virhe reseptin luonnissa! Uutta reseptiä ei luotu.', 'error'));\n      return false;\n    }\n  };\n};\n\nexport const likeRecipe = (recipe) => {\n  return async dispatch => {\n    const likedRecipe = await recipeService.likeRecipe(recipe);\n    dispatch({\n      type: 'LIKE_RECIPE',\n      data: likedRecipe\n    });\n  };\n};\n\nexport const addComment = (recipe, comment) => {\n  return async dispatch => {\n    const updatedRecipe = await recipeService.addComment(recipe, comment);\n    dispatch({\n      type: 'ADD_COMMENT',\n      data: updatedRecipe\n    });\n  };\n};\n\nexport const removeRecipe = (recipe) => {\n  return async dispatch => {\n    await recipeService.removeRecipe(recipe.id);\n    dispatch({\n      type: 'REMOVE_RECIPE',\n      data: recipe\n    });\n  };\n};\n\nexport const updateRecipe = (recipe, id) => {\n  return async dispatch => {\n    try {\n      const updatedRecipe = await recipeService.update(recipe, id);\n      dispatch({\n        type: 'UPDATE_RECIPE',\n        data: updatedRecipe\n      });\n      dispatch(notify(`Reseptin ${updatedRecipe.title} muutokset tallennettu!`, 'success'));\n      return true;\n    } catch (error) {\n      console.log(error);\n      dispatch(notify('Reseptin muokkaaminen ei onnistunut, muutoksia ei tallennettu', 'error'));\n      return false;\n    }\n  };\n};\n\nexport default recipeReducer;","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Grid, Button } from 'semantic-ui-react';\nimport RecipeForm from './RecipeForm';\nimport { addRecipe } from '../reducers/recipeReducer';\n\nconst CreateRecipe = (props) => {\n\n  return (\n    <Grid>\n      <Grid.Row columns={1}>\n        <Grid.Column>\n          <div style={{ textAlign: 'center' }}>\n            <h2>Luo uusi resepti</h2>\n          </div>\n        </Grid.Column>\n      </Grid.Row>\n      <RecipeForm\n        onSubmit={props.addRecipe}\n        submitButton={<Button positive>Lisää resepti</Button>} />\n    </Grid>\n  );\n};\n\nexport default connect(\n  null,\n  { addRecipe }\n)(CreateRecipe);","import React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter, Redirect } from 'react-router-dom';\nimport { Grid, Button } from 'semantic-ui-react';\nimport RecipeForm from './RecipeForm';\nimport { updateRecipe } from '../reducers/recipeReducer';\n\nconst ModifyRecipe = ({ recipe, updateRecipe, loggedUser, history }) => {\n  if (!recipe) return null;\n  if ( !loggedUser || !recipe.user || (recipe.user.id !== loggedUser.id)) return (<Redirect to=\"/recipes\" />);\n  return (\n    <Grid>\n      <Grid.Row columns={1}>\n        <Grid.Column>\n          <div style={{ textAlign: 'center' }}>\n            <h2>Muokkaa reseptiä</h2>\n          </div>\n        </Grid.Column>\n      </Grid.Row>\n      <RecipeForm\n        onSubmit={updateRecipe}\n        values={recipe}\n        submitButton={<Button positive>Tallenna muutokset</Button>} />\n      <Grid.Row columns={1}>\n        <Grid.Column>\n          <div style={{ textAlign: 'center' }}>\n            <Button content=\"Takaisin reseptiin\" onClick={() => history.goBack()} />\n          </div>\n        </Grid.Column>\n      </Grid.Row>\n    </Grid>\n  );\n};\n\nexport default connect(\n  state => ({\n    loggedUser: state.loggedUser\n  }),\n  { updateRecipe }\n)(withRouter(ModifyRecipe));","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Card, Grid, Input, Button, Icon, Image, Label, Dropdown } from 'semantic-ui-react';\nimport { Link, withRouter } from 'react-router-dom';\nimport picture from '../assets/default_picture.jpg';\n\nconst RecipeList = ({ history, recipes, loggedUser }) => {\n  const [ filter, setFilter ] = useState('');\n  const [ sortBy, setSortBy ] = useState(null);\n\n  const recipesToShow = filter\n    ? recipes.filter(recipe => recipe.title.toLowerCase().includes(filter.toLowerCase()))\n    : recipes;\n\n  const sortRecipes = (recipes) => {\n    if (sortBy === 'title') {\n      recipes.sort((a, b) => {\n        const aTitle = a.title.toLowerCase();\n        const bTitle = b.title.toLowerCase();\n        if (aTitle > bTitle) {\n          return 1;\n        } else if (aTitle < bTitle) {\n          return -1;\n        }\n        return 0;\n      });\n    } else if (sortBy === 'likes') {\n      recipes.sort((a, b) => {\n        return b.likes - a.likes;\n      });\n    }\n\n    return recipes;\n  };\n\n  const recipeCardStyle = {\n    position: 'absolute',\n    zIndex: 1,\n    width: '92%',\n    textAlign: 'right',\n    margin: '10px',\n    color: 'black'\n  };\n\n  const recipeList = sortRecipes(recipesToShow).map(recipe =>\n    <Grid.Column key={recipe.id}>\n      <Card as={Link} to={`/recipes/${recipe.id}`} color=\"teal\" style={{ minHeight: '230px' }}>\n        <div style={recipeCardStyle}>\n          <Label size=\"large\" style={{ backgroundColor: 'rgba(232, 232, 232, 0.8)' }}>\n            <Icon name=\"heart\" color=\"red\"/>\n            {recipe.likes || 0}\n          </Label>\n        </div>\n        <Image src={(recipe.img && recipe.img.url) ? recipe.img.url : picture} style={{ maxHeight: '200px' }} />\n        <Card.Content>\n          <Card.Header>\n            {recipe.title}\n          </Card.Header>\n        </Card.Content>\n      </Card>\n    </Grid.Column>\n  );\n\n  const loggedUserOptions = (\n    <Grid.Row centered columns={1} stretched>\n      <Grid.Column width={3}>\n        <Button color=\"teal\" onClick={() => history.push({\n          pathname: `/users/${loggedUser.id}`, state: { tab: 0 } })}>\n          <Icon name=\"book\"/> Omat reseptit\n        </Button>\n      </Grid.Column>\n      <Grid.Column width={3}>\n        <Button color=\"orange\" onClick={() => history.push({\n          pathname: `/users/${loggedUser.id}`, state: { tab: 1 } })}>\n          <Icon name=\"star\"/>Suosikit\n        </Button>\n      </Grid.Column>\n      <Grid.Column width={3}>\n        <Button as={Link} to=\"/recipes/create\" color=\"green\"><Icon name=\"plus\"/>Luo uusi resepti</Button>\n      </Grid.Column>\n    </Grid.Row>\n  );\n\n  const sortOptions = [\n    {\n      key: 'title',\n      text: 'Nimen mukaan',\n      value: 'title'\n    },\n    {\n      key: 'likes',\n      text: 'Eniten tykkäyksiä',\n      value: 'likes',\n    }\n  ];\n\n  return (\n    <Grid >\n      {loggedUser === null ? null : loggedUserOptions}\n      <Grid.Row centered columns={1}>\n        <Grid.Column textAlign=\"center\" width={14}>\n          <h3>Hae reseptejä</h3>\n          <Input icon=\"search\" onChange={({ target }) => setFilter(target.value)} value={filter} />\n\n          <div style={{ textAlign: 'right' }}><Icon name=\"sort alphabet down\" />\n            <Dropdown\n              inline\n              header=\"Järjestä reseptit\"\n              options={sortOptions}\n              placeholder=\"Järjestä reseptit\"\n              onChange={(e, target) => setSortBy(target.value)} />\n          </div>\n        </Grid.Column>\n      </Grid.Row>\n      <Grid.Row centered columns={3}>\n        <Grid.Column />\n        <Grid.Column width={14}>\n          <Grid stackable doubling columns={3}>{recipeList}</Grid>\n        </Grid.Column>\n        <Grid.Column />\n      </Grid.Row>\n    </Grid>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    recipes: state.recipes,\n    loggedUser: state.loggedUser\n  };\n};\n\nexport default connect(\n  mapStateToProps\n)(withRouter(RecipeList));","const loginModalReducer = (state = null, action) => {\n  switch (action.type) {\n    case 'OPEN_LOGIN_MODAL':\n      return true;\n    case 'CLOSE_LOGIN_MODAL':\n      return false;\n    default:\n      return state;\n  }\n};\n\nexport const openLoginModal = () => {\n  return dispatch => {\n    dispatch({\n      type: 'OPEN_LOGIN_MODAL'\n    });\n  };\n};\n\nexport const closeLoginModal = () => {\n  return dispatch => {\n    dispatch({\n      type: 'CLOSE_LOGIN_MODAL'\n    });\n  };\n};\n\nexport default loginModalReducer;","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { Comment, Header, Icon, Form, Button } from 'semantic-ui-react';\nimport { addComment } from '../reducers/recipeReducer';\nimport { notify } from '../reducers/notificationReducer';\nimport { openLoginModal } from '../reducers/loginModalReducer';\n\nconst RecipeComments = ({ recipe, loggedUser, addComment, notify, openLoginModal  }) => {\n  const [comment, setComment] = useState('');\n\n  const handleSubmit = () => async (event) => {\n    event.preventDefault();\n    if (comment.length === 0) return;\n    try {\n      await addComment(recipe, comment);\n      setComment('');\n    } catch (e) {\n      console.log(e);\n      notify('Jotain meni vikaan. Uutta kommenttia ei luotu.', 'error');\n      window.scrollTo(0, 0);\n    }\n  };\n\n  const commentField = () => {\n    if (!loggedUser) {\n      return (\n        <div style={{ marginTop: '30px', marginBottom: '20px' }}>\n          Haluatko jättää kommentin?\n          <span onClick={() => openLoginModal()}\n            style={{ color: '#4183c4', cursor: 'pointer' }}> Kirjaudu sisään.\n          </span>\n        </div>\n      );\n    }\n\n    return (\n      <Form>\n        <textarea\n          value={comment}\n          style={{ marginTop: '30px', marginBottom: '15px' }}\n          onChange={({ target }) => setComment(target.value)} />\n        <Button\n          icon=\"edit\"\n          content=\"Lisää kommentti\"\n          color=\"teal\"\n          labelPosition=\"left\"\n          onClick={handleSubmit()} />\n      </Form>\n    );\n  };\n\n  const commentBox = (idx, comment) => {\n    const bgcolor = idx % 2 === 0 ? '#ffffff' : '#e8fefe';\n    return (\n      <Comment key={comment._id} style={{ padding: '20px', backgroundColor: bgcolor }}>\n        <Comment.Content>\n          <Icon name=\"user\" />\n          <Comment.Author as={Link} to={`/users/${comment.user.id}`}>{comment.user.username}</Comment.Author>\n          <Comment.Metadata>{new Date(comment.date).toLocaleString()}</Comment.Metadata>\n          <Comment.Text>{comment.content}</Comment.Text>\n        </Comment.Content>\n      </Comment>\n    );\n  };\n\n  const commentsToShow = () => {\n    if (!recipe.comments || recipe.comments.length === 0) {\n      return (\n        <div style={{ padding: '20px' }}>Tällä reseptillä ei ole vielä kommentteja.</div>\n      );\n    }\n\n    return recipe.comments.map((comment, idx) => commentBox(idx, comment));\n  };\n\n  return (\n    <>\n    <Comment.Group style={{ minWidth: '80%', marginTop: '50px' }}>\n      <Header dividing>Kommentit</Header>\n      {commentsToShow()}\n      {commentField()}\n    </Comment.Group>\n    </>\n  );\n};\n\nexport default connect(\n  state => ({\n    loggedUser: state.loggedUser\n  }),\n  { addComment, notify, openLoginModal }\n)(RecipeComments);","import axios from 'axios';\n\nconst baseUrl = '/api/users';\nlet token = null;\n\nconst setToken = newToken => {\n  token = `Bearer ${newToken}`;\n};\n\nconst getAll = async () => {\n  const res = await axios.get(baseUrl);\n  return res.data;\n};\n\nconst create = async (user) => {\n  const res = await axios.post(baseUrl, user);\n  return res.data;\n};\n\nconst updateFavoriteRecipes = async (id, recipeId) => {\n  const config = { headers: { Authorization: token } };\n  const res = await axios.patch(`${baseUrl}/${id}`, { favorite: recipeId }, config);\n  return res.data;\n};\n\nexport default { getAll, create, updateFavoriteRecipes, setToken };","import userService from '../services/users';\n\nconst userReducer = (state = [], action) => {\n  switch (action.type) {\n    case 'INITIALIZE_USERS':\n      return action.data;\n    case 'ADD_USER':\n      return [...state, action.data];\n    case 'UPDATE_USER':\n      return state.map(u => u.id !== action.data.id ? u : action.data);\n    default:\n      return state;\n  }\n};\n\nexport const initializeUsers = () => async (dispatch) => {\n  const users = await userService.getAll();\n  dispatch({\n    type: 'INITIALIZE_USERS',\n    data: users\n  });\n};\n\nexport const createUser = (user) => async (dispatch) => {\n  const newUser = await userService.create(user);\n  dispatch({\n    type: 'ADD_USER',\n    data: newUser\n  });\n};\n\nexport const favoriteRecipe = (id, recipe) => async (dispatch) => {\n  const updatedUser = await userService.updateFavoriteRecipes(id, recipe);\n  dispatch({\n    type: 'UPDATE_USER',\n    data: updatedUser\n  });\n};\n\nexport default userReducer;","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Table, Grid, Image, Icon, Label, Button, Modal } from 'semantic-ui-react';\nimport { Link, withRouter } from 'react-router-dom';\nimport RecipeComments from '../components/RecipeComments';\nimport picture from '../assets/default_picture.jpg';\nimport { likeRecipe, removeRecipe } from '../reducers/recipeReducer';\nimport { favoriteRecipe } from '../reducers/userReducer';\nimport { openLoginModal } from '../reducers/loginModalReducer';\nimport { notify } from '../reducers/notificationReducer';\n\nconst Recipe = (props) => {\n  const [showRemoveModal, setShowRemoveModal] = useState(false);\n  const { recipe, likeRecipe, favoriteRecipe,\n    loggedUser, isFavorited, openLoginModal, removeRecipe } = props;\n  if (!recipe) return null;\n\n  const handleClick = () => ({ target }) => {\n    if (!loggedUser) {\n      openLoginModal();\n    } else if (target.name === 'like') {\n      likeRecipe(recipe);\n    } else if (target.name === 'favorite') {\n      favoriteRecipe(loggedUser.id, recipe.id);\n    }\n  };\n\n  const removeRecipeModal = () => (\n    <Modal size=\"tiny\" open={showRemoveModal} onClose={() => setShowRemoveModal(false)}>\n      <Modal.Header>Poistetaanko resepti?</Modal.Header>\n      <Modal.Content>\n        <p>Haluatko varmasti poistaa reseptin\n          <span style={{ fontWeight: 'bold' }}> {recipe.title}</span>?</p>\n        <p>Reseptiä ei voi palauttaa enää poistamisen jälkeen.</p>\n      </Modal.Content>\n      <Modal.Actions>\n        <Button onClick={() => setShowRemoveModal(false)}>Peruuta</Button>\n        <Button\n          color=\"red\"\n          icon=\"trash alternate\"\n          labelPosition=\"left\"\n          content=\"Poista resepti\"\n          onClick={handleRemove} />\n      </Modal.Actions>\n    </Modal>\n  );\n\n  const handleRemove = async () => {\n    try {\n      await removeRecipe(recipe);\n      props.history.push('/recipes');\n      props.notify(`Resepti \"${recipe.title}\" poistettu`, 'success');\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const showRecipeOwnerOptions = () => {\n    if (recipe.user && loggedUser && loggedUser.id === recipe.user.id) {\n      return (\n        <>\n        <Button\n          icon=\"edit\"\n          color=\"blue\"\n          labelPosition=\"left\"\n          content=\"Muokkaa reseptiä\"\n          onClick={() => props.history.push(`/recipes/${recipe.id}/update`)}\n        />\n          <div style={{ paddingTop: '5px' }}>\n            <Button\n              icon=\"trash alternate\"\n              color=\"red\"\n              labelPosition=\"left\"\n              content=\"Poista resepti\"\n              onClick={() => setShowRemoveModal(true)}\n            />\n          </div>\n        </>\n      );\n    }\n    return null;\n  };\n\n  return (\n    <Grid stackable padded>\n      {removeRecipeModal()}\n      <Grid.Row columns={2}>\n        <Grid.Column width={12}>\n          <h3>{recipe.title}</h3>\n          {recipe.user\n            ? <div>\n              <Icon name=\"user\" />\n              <Link to={`/users/${recipe.user.id}`}>{recipe.user.username}</Link>\n            </div>\n            : null}\n        </Grid.Column>\n        <Grid.Column width={4}>\n          {showRecipeOwnerOptions()}\n        </Grid.Column>\n      </Grid.Row>\n      <Grid.Row columns={3}>\n        <Grid.Column width={5}>\n          <Image src={(recipe.img && recipe.img.url) ? recipe.img.url : picture} size=\"medium\" rounded style={{ maxHeight: '240px' }}/>\n        </Grid.Column>\n        <Grid.Column verticalAlign=\"bottom\">\n          <Button as=\"div\" labelPosition=\"left\">\n            <Label as=\"a\" basic color=\"red\" pointing=\"right\">\n              <Icon name=\"heart\" /> {recipe.likes || 0}\n            </Label>\n            <Button color=\"red\" name=\"like\" onClick={handleClick()}>Tykkää</Button>\n          </Button>\n          <div style={{ marginTop: '10px' }}>\n            <Button basic={isFavorited || false} color=\"orange\" name=\"favorite\" onClick={handleClick()}>\n              <Icon name=\"star\" /> { isFavorited ? 'Poista suosikeista' : 'Lisää suosikkeihin' }\n            </Button>\n          </div>\n          <table style={{ paddingTop: '20px', paddingBottom: '20px' }}>\n            <tbody>\n              <tr>\n                <td style={{ paddingRight: '10px' }}><Icon name=\"clock outline\" /> Valmistusaika</td>\n                <td> {recipe.cookingTime || '--'}</td>\n              </tr>\n              <tr>\n                <td><Icon name=\"utensils\" /> Annosmäärä</td>\n                <td>{recipe.servings || '--' }</td>\n              </tr>\n            </tbody>\n          </table>\n          <Label color={'teal'}>{recipe.category}</Label>\n        </Grid.Column>\n      </Grid.Row>\n\n      <Grid.Row>\n        <Grid.Column width={4}>\n          <Table unstackable>\n            <Table.Header>\n              <Table.Row>\n                <Table.HeaderCell colSpan=\"2\">Ainekset</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n            <Table.Body>\n              {recipe.ingredients.map(ingredient =>\n                <Table.Row key={ingredient.name} >\n                  {ingredient.amount ? <Table.Cell>{ingredient.amount}</Table.Cell> : null }\n                  <Table.Cell>{ingredient.name}</Table.Cell>\n                </Table.Row>\n              )}\n            </Table.Body>\n          </Table>\n        </Grid.Column>\n        <Grid.Column width={8}>\n          <h4>Ohjeet</h4>\n          <p style={{ whiteSpace: 'pre-line' }}>\n            {recipe.instructions}\n          </p>\n        </Grid.Column>\n      </Grid.Row>\n      <Grid.Row columns={1}>\n        <Grid.Column width={16} style={{ marginTop: '20px' }}>\n          <RecipeComments recipe={recipe}/>\n        </Grid.Column>\n      </Grid.Row>\n    </Grid>\n  );\n};\n\nconst isFavorited = (loggedUser, users, recipe) => {\n  let isFavorited = null;\n  if (loggedUser && users && recipe) {\n    const user = users.find(user => user.id === loggedUser.id);\n    const userfavorites = user ? user.favoriteRecipes.map(r => r.id) : null;\n    isFavorited = userfavorites ? userfavorites.includes(recipe.id) : null;\n  }\n  return isFavorited;\n};\n\nexport default connect(\n  (state, ownProps) => ({\n    loggedUser: state.loggedUser,\n    isFavorited: isFavorited(state.loggedUser, state.users, ownProps.recipe)\n  }),\n  { likeRecipe, favoriteRecipe, openLoginModal, removeRecipe, notify }\n)(withRouter(Recipe));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Message } from 'semantic-ui-react';\n\nconst Notification = (props) => {\n  if (!props.notification) return null;\n\n  if (props.notification.notifType === 'success') {\n    return (\n      <Message color=\"green\">\n        {props.notification.msg}\n      </Message>\n    );\n  } else if (props.notification.notifType === 'error') {\n    return (\n      <Message color=\"red\">\n        {props.notification.msg}\n      </Message>\n    );\n  } else {\n    return (\n      <Message>\n        {props.notification.msg}\n      </Message>\n    );\n  }\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    notification: state.notification\n  };\n};\n\nexport default connect(\n  mapStateToProps\n)(Notification);","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Grid, Card, Image } from 'semantic-ui-react';\nimport picture from '../assets/default_picture.jpg';\n\nconst RecipeCard = ({ recipe }) => {\n  if (!recipe) return null;\n  return (\n    <Grid.Column key={recipe.id}>\n      <Card as={Link} to={`/recipes/${recipe.id}`} color=\"teal\" style={{ minHeight: '210px' }}>\n        <Image src={(recipe.img && recipe.img.url) ? recipe.img.url : picture} style={{ maxHeight: '170px' }}/>\n        <Card.Content>\n          <Card.Header style={{ overflow: 'hidden' }}>{recipe.title}</Card.Header>\n        </Card.Content>\n      </Card>\n    </Grid.Column>\n  );\n};\n\nexport default RecipeCard;","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Grid, } from 'semantic-ui-react';\nimport RecipeCard from '../components/RecipeCard';\n\nconst Dashboard = ({ recipes }) => {\n\n  const getRandomRecipes = () => {\n    if (recipes.length === 0) return [];\n    let randomArray = [];\n    for (let i = 0; i < 4; i++) {\n      const random = Math.floor(Math.random() * recipes.length);\n      if (!randomArray.includes(random)) {\n        randomArray.push(random);\n      }\n    }\n\n    return randomArray.map(random =>\n      <RecipeCard key={recipes[random]['id']} recipe={recipes[random]} />\n    );\n  };\n\n  const getNewestRecipes = () => {\n    if (recipes.length === 0) return [];\n    let newestRecipes = new Array(4);\n    for (let i = 0; i < newestRecipes.length; i++) {\n      const recipe = recipes[recipes.length-i-1];\n      newestRecipes[i] = <RecipeCard key={recipe.id} recipe={recipe} />;\n    }\n    return newestRecipes;\n  };\n\n  return (\n    <Grid padded>\n      <Grid.Row columns={1}>\n        <Grid.Column width={12}>\n          <p>Keittokirjassa tällä hetkellä {recipes.length} reseptiä!</p>\n        </Grid.Column>\n      </Grid.Row>\n      <Grid.Row >\n        <Grid.Column>\n          <h3>Satunnaisia reseptejä</h3>\n        </Grid.Column>\n      </Grid.Row>\n      <Grid.Row style={{ padding: 0, margin: 0 }}>\n        <Grid doubling columns={4} style={{ padding: 0, margin: 0 }}>\n          {getRandomRecipes()}\n        </Grid>\n      </Grid.Row>\n      <Grid.Row>\n        <Grid.Column>\n          <h3>Uusimmat reseptit</h3>\n        </Grid.Column>\n      </Grid.Row>\n      <Grid.Row style={{ padding: 0, margin: 0 }}>\n        <Grid doubling columns={4} style={{ padding: 0, margin: 0 }}>\n          {getNewestRecipes()}\n        </Grid>\n      </Grid.Row>\n    </Grid>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    recipes: state.recipes\n  };\n};\n\nexport default connect(\n  mapStateToProps\n)(Dashboard);","import axios from 'axios';\n\nconst login = async (credentials) => {\n  const res = await axios.post('/api/login', credentials);\n  return res.data;\n};\n\nexport default { login };","import loginService from '../services/login';\nimport recipeService from '../services/recipes';\nimport userService from '../services/users';\n\nconst loginReducer = (state = null, action) => {\n  switch (action.type) {\n    case 'INIT_LOGGED_USER':\n      return { ...action.user };\n    case 'LOGIN':\n      return { ...action.user };\n    case 'LOGOUT':\n      return null;\n    default:\n      return state;\n  }\n};\n\nexport const setInitialLoggedUser = (user) => dispatch => {\n  recipeService.setToken(user.token);\n  userService.setToken(user.token);\n  dispatch({\n    type: 'INIT_LOGGED_USER',\n    user: ({ id: user.id, username: user.username })\n  });\n};\n\nexport const login = (user) => async dispatch => {\n  const loggedUser = await loginService.login(user);\n  window.localStorage.setItem('loggedCookbookUser', JSON.stringify(loggedUser));\n  recipeService.setToken(loggedUser.token);\n  userService.setToken(loggedUser.token);\n  dispatch({\n    type: 'LOGIN',\n    user: { id: loggedUser.id, username: loggedUser.username }\n  });\n};\n\nexport const logout = () => dispatch => {\n  window.localStorage.clear();\n  recipeService.setToken(null);\n  userService.setToken(null);\n  dispatch({\n    type: 'LOGOUT'\n  });\n};\n\nexport default loginReducer;","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { Menu, Icon, Dropdown } from 'semantic-ui-react';\nimport { openLoginModal } from '../reducers/loginModalReducer';\nimport { logout } from '../reducers/loginReducer';\n\nconst MenuBar = (props) => {\n  const loginDropdownTrigger = (\n    <span style={{ minWidth: '90px' }}>\n      <Icon name=\"user circle\" />\n      {props.loggedUser === null ? '' : props.loggedUser.username}\n    </span>\n  );\n\n  const loggedUserStyle = {\n    backgroundColor: '#00b5ad',\n    color: 'white',\n    fontWeight: 'bold',\n    borderRadius: '0 0.28571429rem 0.28571429rem 0'\n  };\n\n  const loggedUserMenu = () => {\n    if (props.loggedUser) {\n      return (\n        <Dropdown style={loggedUserStyle} item trigger={loginDropdownTrigger}>\n          <Dropdown.Menu>\n            <Dropdown.Item as={Link} to={`/users/${props.loggedUser.id}`}>\n              Oma profiili\n            </Dropdown.Item>\n            <Dropdown.Item as={Link} to=\"/recipes/create\">\n              Luo uusi resepti\n            </Dropdown.Item>\n            <Dropdown.Item onClick={() => props.logout()}>\n              Kirjaudu ulos\n            </Dropdown.Item>\n          </Dropdown.Menu>\n        </Dropdown>\n      );\n    }\n\n    return (\n      <Menu.Item name=\"login\" onClick={() => props.openLoginModal()}>\n        <Icon name=\"user circle outline\" />\n        Kirjaudu sisään\n      </Menu.Item>\n    );\n  };\n\n  return (\n    <Menu>\n      <Menu.Item as={Link} to=\"/\" name=\"etusivu\" />\n      <Menu.Item as={Link} to=\"/recipes\" name=\"reseptit\" />\n      <Menu.Item as={Link} to=\"/users\" name=\"kayttajat\">Käyttäjät</Menu.Item>\n      <Menu.Menu position=\"right\">\n        {loggedUserMenu()}\n      </Menu.Menu>\n    </Menu>\n  );\n};\n\nexport default connect(\n  state => ({\n    loggedUser: state.loggedUser\n  }),\n  { openLoginModal, logout }\n)(MenuBar);","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Modal, Form, Button, Divider, Message } from 'semantic-ui-react';\r\nimport { closeLoginModal } from '../reducers/loginModalReducer';\r\nimport { login } from '../reducers/loginReducer';\r\nimport { notify } from '../reducers/notificationReducer';\r\n\r\nconst LoginForm = (props) => {\r\n  const [ username, setUsername] = useState();\r\n  const [ password, setPassword ] = useState();\r\n  const [ error, setError] = useState('');\r\n\r\n  const validateFields = () => {\r\n    let errorMsg = '';\r\n    if (!username || !password) {\r\n      errorMsg = 'Kirjoita käyttäjätunnus ja salasana kirjautuaksesi';\r\n    }\r\n\r\n    setError(errorMsg);\r\n    return errorMsg.length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    if (validateFields()) {\r\n      try {\r\n        await props.login({ username, password });\r\n        setUsername('');\r\n        setPassword('');\r\n        props.closeLoginModal();\r\n        props.history.push('/');\r\n        props.notify(`Tervetuloa ${username}!`, 'success');\r\n      } catch (error) {\r\n        console.log(error);\r\n        setError('Wrong username or password');\r\n      }\r\n    }\r\n  };\r\n\r\n  const onSignupClick = () => () => {\r\n    props.closeLoginModal();\r\n    props.history.push('/signup');\r\n  };\r\n\r\n  return(\r\n    <Modal size=\"tiny\" open={props.loginModal}  onClose={() => {\r\n      props.closeLoginModal();\r\n      setError(''); }\r\n    }>\r\n      <div style={{ padding: '40px' }}>\r\n        <div style={{ textAlign: 'center', paddingBottom: '20px' }}>\r\n          <h2>Kirjaudu sisään</h2>\r\n        </div>\r\n        { error.length === 0 ? null : <Message negative>{error}</Message> }\r\n        <Form onSubmit={handleSubmit}>\r\n          <Form.Field>\r\n            <label>Käyttäjätunnus</label>\r\n            <Form.Input\r\n              placeholder=\"Kirjoita käyttäjätunnus\"\r\n              icon=\"user\"\r\n              iconPosition=\"left\"\r\n              onChange={({ target }) => setUsername(target.value)}/>\r\n          </Form.Field>\r\n          <Form.Field >\r\n            <label>Salasana</label>\r\n            <Form.Input\r\n              placeholder=\"Kirjoita salasana\"\r\n              type=\"password\"\r\n              icon=\"lock\"\r\n              iconPosition=\"left\"\r\n              onChange={({ target }) => setPassword(target.value)} />\r\n          </Form.Field>\r\n          <div style={{ textAlign: 'center', padding: '10px' }}>\r\n            <Button positive>Kirjaudu sisään</Button>\r\n          </div>\r\n        </Form>\r\n        <Divider />\r\n        <div style={{ textAlign: 'center' }}>\r\n          <p>Ei käyttäjätunnusta?</p>\r\n          <Button icon=\"signup\" content=\"Luo uusi käyttäjätunnus\" onClick={onSignupClick()}/>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default connect(\r\n  state => ({\r\n    loginModal: state.loginModal\r\n  }),\r\n  { closeLoginModal, login, notify }\r\n)(withRouter(LoginForm));","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { Grid, Icon, Card, Input, Button, Divider } from 'semantic-ui-react';\n\nconst UserCard = ({ user }) => {\n  if (!user) return null;\n  return (\n    <Card\n      color=\"teal\"\n      as={Link}\n      to={`/users/${user.id}`}\n      style={{ textAlign: 'center' }}>\n      <Card.Content>\n        <Card.Header>\n          <Icon name=\"user outline\" />\n          {user.username}\n        </Card.Header>\n      </Card.Content>\n    </Card>\n  );\n};\n\nconst Users = ({ users }) => {\n  const [searchFilter, setSearchFilter] = useState('');\n  const [searchResult, setSearchResult] = useState([]);\n\n  const searchUsers = () => {\n    const matchingUsers = searchFilter.length > 0\n      ? users.filter(user => user.username.toLowerCase().includes(searchFilter))\n      : [];\n    setSearchResult(matchingUsers);\n  };\n\n  const mostRecipes = () => {\n    let sortedByRecipes = [...users];\n    sortedByRecipes.sort((a, b) => {\n      if (a.recipes.length < b.recipes.length) {\n        return 1;\n      } else if (a.recipes.length > b.recipes.length) {\n        return -1;\n      } else {\n        return 0;\n      }\n    });\n    return sortedByRecipes.slice(0,3);\n  };\n\n  return (\n    <Grid padded>\n      <Grid.Row>\n        <Grid.Column>\n          <h2>Käyttäjät</h2>\n          <Divider />\n          <div style={{ textAlign: 'center', marginBottom: '20px' }}>\n            <h3>Hae käyttäjiä</h3>\n            <p>Hae käyttäjiä kirjoittamalla käyttäjätunnus tai sen osa ja klikkaa &quot;Hae&quot;.</p>\n            <Input icon=\"search\" iconPosition=\"left\" placeholder=\"Kirjoita käyttäjätunnus\"\n              value={searchFilter}\n              style={{ marginBottom: '20px'}}\n              onChange={({ target }) => setSearchFilter(target.value)}\n              action={<Button onClick={() => searchUsers()}>Hae</Button>}/>\n            { searchResult.length === 0\n              ? ''\n              : <p style={{ fontSize: '16px', fontWeight: 'bold' }}>\n                  Käyttäjät hakusanalla &quot;{searchFilter}&quot;\n              </p>}\n            <Card.Group centered>{searchResult.map(user => <UserCard key={user.id} user={user} />)}</Card.Group>\n          </div>\n          <Divider />\n          <h3>Uusimmat käyttäjät</h3>\n          <Card.Group>\n            {users.slice(0,3).map(user => <UserCard key={user.id} user={user} />)}\n          </Card.Group>\n          <h3>Eniten reseptejä lisänneet käyttäjät</h3>\n          <Card.Group>\n            {mostRecipes().map(user => <UserCard key={user.id} user={user} />)}\n          </Card.Group>\n        </Grid.Column>\n      </Grid.Row>\n    </Grid>\n  );\n};\n\nexport default connect(\n  state => ({\n    users: state.users\n  })\n)(Users);","import React, { useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Grid, Form, Button, Icon, Accordion, List } from 'semantic-ui-react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { createUser } from '../reducers/userReducer';\r\nimport { notify } from '../reducers/notificationReducer';\r\n\r\nconst SignupForm = (props) => {\r\n  const [values, setValues] = useState({\r\n    username: '',\r\n    password: '',\r\n    passwordConfirm: ''\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const [showAccordion, setShowAccordion] = useState(false);\r\n\r\n  const validateFields = () => {\r\n    const fieldErrors = {};\r\n\r\n    if (!values.username) {\r\n      fieldErrors.username = 'Valitse käyttäjätunnus';\r\n    } else if (values.username.length < 3 || values.username.length > 20) {\r\n      fieldErrors.username = 'Käyttäjätunnuksen tulee olla 3-20 merkkiä pitkä';\r\n    } else if (!RegExp('^[a-zA-Z0-9_]*$').test(values.username)) {\r\n      fieldErrors.username = 'Kaikki käyttäjätunnuksen merkit eivät ole sallittuja';\r\n    }\r\n\r\n    if (!values.password) {\r\n      fieldErrors.password = 'Valitse salasana';\r\n      fieldErrors.passwordConfirm = 'Valitse salasana';\r\n    } else if (values.password.length < 10) {\r\n      fieldErrors.password = 'Salasanan tulee olla vähintään 10 merkkiä pitkä';\r\n    } else if (!RegExp('^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[.,:;-_])').test(values.password)) {\r\n      fieldErrors.password = 'Salasanassa ei ole kaikkia vaadittuja merkkejä';\r\n    }\r\n\r\n    if (values.passwordConfirm !== values.password) {\r\n      fieldErrors.passwordConfirm = 'Salasanat eivät ole samat';\r\n    }\r\n\r\n    let isValid = true;\r\n    setErrors(fieldErrors);\r\n    Object.values(fieldErrors).forEach(error => {\r\n      if (error) {\r\n        setShowAccordion(true);\r\n        return isValid = false;\r\n      }\r\n    });\r\n    return isValid;\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (validateFields()) {\r\n      try {\r\n        await props.createUser({\r\n          username: values.username,\r\n          password: values.password\r\n        });\r\n        setValues({ username: '', password: '', passwordConfirm: '' });\r\n        props.history.push('/');\r\n        props.notify('Rekisteröityminen onnistui! Voit nyt kirjautua sisään käyttäjätunnuksellasi.', 'success');\r\n      } catch (error) {\r\n        if (error.response && error.response.data.error.type === 'USERNAME_DUPLICATE') {\r\n          setErrors({ usernameDuplicate: 'Käyttäjätunnus on jo varattu' });\r\n        } else {\r\n          props.notify('Virhe käyttäjän luonnissa! Uutta käyttäjätunnusta ei luotu.', 'error');\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleChange = ({ target }) => {\r\n    setValues({ ...values, [target.name]: target.value });\r\n    setErrors({ ...errors, [target.name]: null });\r\n  };\r\n\r\n  const showError = (field) => {\r\n    if (errors[field]) {\r\n      return (\r\n        <div style={{ float: 'right' }}>\r\n          <Icon color=\"yellow\" name=\"exclamation triangle\" />\r\n          {errors[field]}\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <Grid padded>\r\n      <Grid.Row centered columns={1}>\r\n        <h2>Rekisteröidy</h2>\r\n        <Grid.Column width={8}>\r\n          <Form onSubmit={handleSubmit}>\r\n            <Form.Field error={(errors.username || errors.usernameDuplicate) && true}>\r\n              <label>Käyttäjätunnus {showError('username')}{showError('usernameDuplicate')}</label>\r\n              <input\r\n                placeholder=\"Kirjoita käyttäjätunnus\"\r\n                name=\"username\"\r\n                value={values.username}\r\n                onChange={handleChange} />\r\n            </Form.Field>\r\n            <Form.Field error={errors.password && true}>\r\n              <label>Salasana {showError('password')}</label>\r\n              <input\r\n                placeholder=\"Kirjoita salasana\"\r\n                type=\"password\"\r\n                name=\"password\"\r\n                value={values.password}\r\n                onChange={handleChange} />\r\n            </Form.Field>\r\n            <Form.Field error={errors.passwordConfirm && true}>\r\n              <label>Vahvista salasana {showError('passwordConfirm')}</label>\r\n              <input\r\n                placeholder=\"Kirjoita salasana uudelleen\"\r\n                type=\"password\"\r\n                name=\"passwordConfirm\"\r\n                value={values.passwordConfirm}\r\n                onChange={handleChange} />\r\n            </Form.Field>\r\n            <div style={{ textAlign: 'center', paddingTop: '20px', paddingBottom: '20px' }}>\r\n              <Button positive>Luo käyttäjätunnus</Button>\r\n            </div>\r\n          </Form>\r\n          <Accordion>\r\n            <Accordion.Title active={showAccordion} onClick={() => setShowAccordion(!showAccordion)}>\r\n              <Icon name=\"question circle\" />Miten täytän lomakkeen? <Icon name=\"dropdown\" />\r\n            </Accordion.Title>\r\n            <Accordion.Content active={showAccordion}>\r\n              <List>\r\n                <List.Item>\r\n                  <List.Header>Käyttäjätunnus</List.Header>\r\n                  Käyttäjätunnuksen tulee olla 3-20 merkkiä pitkä ja se voi koostua kirjaimista, numeroista ja alaviivasta ( _ ).\r\n                  Lisäksi sen tulee olla uniikki, joten et voi valita käyttäjätunnusta, joka on jo käytössä.\r\n                </List.Item>\r\n                <List.Item>\r\n                  <List.Header>Salasana</List.Header>\r\n                  Salasanan tulee olla vähintään 10 merkkiä pitkä.\r\n                  Siinä tulee olla vähintään yksi merkki jokaisesta seuraavasta joukosta:\r\n                  <ul>\r\n                    <li>pieni kirjain (a-z)</li>\r\n                    <li>iso kirjain (A-Z)</li>\r\n                    <li>numero (0-9)</li>\r\n                    <li>erikoismerkki (, . - _ : ;)</li>\r\n                  </ul>\r\n                </List.Item>\r\n              </List>\r\n            </Accordion.Content>\r\n          </Accordion>\r\n        </Grid.Column>\r\n      </Grid.Row>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  { createUser, notify }\r\n)(withRouter(SignupForm));","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Tab, Grid } from 'semantic-ui-react';\nimport RecipeCard from '../components/RecipeCard';\n\nconst User = ({ loggedUser, user, selectedTab }) => {\n  if (!user) return null;\n\n  const loggedUserProfile = loggedUser && loggedUser.id === user.id;\n\n  const recipeGrid = (recipes) => {\n    return (\n      <Grid padded columns={4}>\n        {recipes.map(recipe => <RecipeCard key={recipe.id} recipe={recipe} />)}\n      </Grid>\n    );\n  };\n\n  const paneStyle = {\n    minHeight: '200px',\n    marginBottom: '20px'\n  };\n\n  const recipePane = <Tab.Pane style={paneStyle}>\n    {user.recipes.length === 0 ? 'Ei lisättyjä reseptejä' : recipeGrid(user.recipes)}\n  </Tab.Pane>;\n\n  const favoritesPane = <Tab.Pane style={paneStyle}>\n    {user.favoriteRecipes.length === 0 ? 'Ei suosikkireseptejä' : recipeGrid(user.favoriteRecipes)}\n  </Tab.Pane>;\n\n  const panesToShow = loggedUserProfile\n    ? [{ menuItem: { key: 'all', icon: 'book', content: 'Omat reseptit' }, render: () => recipePane },\n      { menuItem: { key: 'favorites', icon: 'star', content: 'Suosikit' }, render: () => favoritesPane }]\n    : [{ menuItem: { key: 'all', icon: 'book', content: 'Käyttäjän reseptit' }, render: () => recipePane }];\n\n  return (\n    <>\n      <h2>{user.username}</h2>\n      <Tab panes={panesToShow} defaultActiveIndex={selectedTab ? Number(selectedTab.tab) || 0 : 0} />\n    </>\n  );\n};\n\nexport default connect(\n  state => ({\n    loggedUser: state.loggedUser\n  })\n)(User);","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { BrowserRouter as Router, Route, Redirect } from 'react-router-dom';\nimport { Container } from 'semantic-ui-react';\nimport CreateRecipe from './components/CreateRecipe';\nimport ModifyRecipe from './components/ModifyRecipe';\nimport RecipeList from './components/RecipeList';\nimport Recipe from './components/Recipe';\nimport Notification from './components/Notification';\nimport Dashboard from './components/Dashboard';\nimport MenuBar from './components/MenuBar';\nimport LoginForm from './components/LoginForm';\nimport Users from './components/Users';\nimport SignupForm from './components/SignupForm';\nimport User from './components/User';\nimport { initializeRecipes } from './reducers/recipeReducer';\nimport { initializeUsers } from './reducers/userReducer';\nimport { setInitialLoggedUser } from './reducers/loginReducer';\nimport { openLoginModal } from './reducers/loginModalReducer';\n\nfunction App(props) {\n  const { initializeRecipes,\n    initializeUsers,\n    setInitialLoggedUser,\n    openLoginModal } = props;\n\n  useEffect(() => {\n    initializeRecipes();\n    initializeUsers();\n  }, [initializeRecipes, initializeUsers]);\n\n  useEffect(() => {\n    const storedLoggedUser = window.localStorage.getItem('loggedCookbookUser');\n    if (storedLoggedUser) {\n      const user = JSON.parse(storedLoggedUser);\n      setInitialLoggedUser(user);\n    }\n  }, [setInitialLoggedUser]);\n\n  const recipeById = (id) => {\n    return props.recipes.find(recipe => recipe.id === id);\n  };\n\n  const userById = (id) => {\n    return props.users.find(user => user.id === id);\n  };\n\n  const showLoginModal = () => {\n    openLoginModal();\n    return <Redirect to=\"/\" />;\n  };\n\n  return (\n    <Container>\n      <Router>\n        <h1>Cookbook</h1>\n        <MenuBar />\n        <LoginForm />\n        <Notification />\n        <Route exact path=\"/\" render={() => <Dashboard />} />\n        <Route exact path=\"/recipes\" render={() => <RecipeList />} />\n        <Route exact path=\"/recipes/create\" render={() => (\n          props.loggedUser ? <CreateRecipe /> : showLoginModal())}  />\n        <Route exact path=\"/recipes/:id\" render={({ match }) => <Recipe recipe={recipeById(match.params.id)}/>} />\n        <Route exact path=\"/recipes/:id/update\" render={({ match }) => <ModifyRecipe recipe={recipeById(match.params.id)}/>} />\n        <Route exact path=\"/users\" render={() => <Users />} />\n        <Route exact path=\"/users/:id\" render={({ match, location }) =>\n          <User user={userById(match.params.id)} selectedTab={location.state} />} />\n        <Route exact path=\"/signup\" render={() => (\n          props.loggedUser ? <Redirect to=\"/\" /> : <SignupForm /> )} />\n      </Router>\n    </Container>\n  );\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    recipes: state.recipes,\n    loggedUser: state.loggedUser,\n    users: state.users\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  { initializeRecipes,\n    initializeUsers,\n    setInitialLoggedUser,\n    openLoginModal }\n)(App);\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { createStore, applyMiddleware, combineReducers } from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport thunk from 'redux-thunk';\r\nimport App from './App';\r\nimport recipeReducer from './reducers/recipeReducer';\r\nimport notificationReducer from './reducers/notificationReducer';\r\nimport loginModalReducer from './reducers/loginModalReducer';\r\nimport loginReducer from './reducers/loginReducer';\r\nimport userReducer from './reducers/userReducer';\r\n\r\nconst reducer = combineReducers({\r\n  recipes: recipeReducer,\r\n  notification: notificationReducer,\r\n  loginModal: loginModalReducer,\r\n  loggedUser: loginReducer,\r\n  users: userReducer,\r\n});\r\n\r\nconst store = createStore(reducer, applyMiddleware(thunk));\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n","module.exports = __webpack_public_path__ + \"static/media/default_picture.e215bd8a.jpg\";"],"sourceRoot":""}